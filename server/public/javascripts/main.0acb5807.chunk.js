(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(43),o=a.n(l),s=a(8),r=a(9),i=a(11),u=a(10),m=a(12),p=a(48),h=a(5),d=a(44),E=a.n(d)()("http://94.45.133.18:53000");var f=c.a.createContext({token:null,username:"",login:function(){},logout:function(){}}),b=a(45),v=a.n(b),g=a(46),k=function(e){function t(e){var a,n,l;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={messageText:"",messages:[]},a.addEmoji=function(e,t){a.setState({messageText:a.state.messageText+":".concat(t.name,":")})},a.handleSubmit=function(e){var t,n,c;(e.preventDefault(),0!==a.state.messageText.trim().length)&&(t=a.context.username+": "+a.state.messageText,n=a.props.pros,c=a.props.topic._id,E.emit("publishMessage",{text:t,pros:n,topicId:c}),a.setState({messageText:""}))},n=a.props.topic._id,l=function(e){var t={convertShortnames:!0,convertUnicode:!0,convertAscii:!0},n=e.pros?"yes":"no";a.setState(function(a){return{messages:a.messages.concat([c.a.createElement("li",{key:e._id,className:n},c.a.createElement("div",null,Object(g.emojify)(e.text,t)))])}})},E.on("messages:".concat(n),function(e){return l(e)}),E.emit("subscribeToRoom",{topicId:n}),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"wrapper__top"},c.a.createElement("header",null,c.a.createElement("button",{className:"btn-logout",onClick:function(){return e.context.logout()}},"\u0412\u044b\u0439\u0442\u0438"),c.a.createElement("h1",null,"\u0421\u0420\u04104")),c.a.createElement("div",{className:"main"},c.a.createElement("section",{className:"theme-content"},c.a.createElement("button",{className:"btn-logout",onClick:function(t){return e.props.back()}},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0443\u044e \u0442\u0435\u043c\u0443"),c.a.createElement("h3",{className:"theme-chat-title"},this.props.topic.title),c.a.createElement("div",{className:"theme-chat"},c.a.createElement("ul",{className:"chat-list"},c.a.createElement("li",{key:"0",className:"chat-list__title"},c.a.createElement("strong",null,"\u041f\u0420\u041e\u0422\u0418\u0412"),c.a.createElement("strong",null,"\u0417\u0410")),this.state.messages)),c.a.createElement("form",{className:"theme-form",onSubmit:this.handleSubmit},c.a.createElement("textarea",{cols:"",rows:"4",value:this.state.messageText,onChange:function(t){return e.setState({messageText:t.target.value})}}),c.a.createElement(v.a,{onEmojiClick:this.addEmoji}),c.a.createElement("input",{type:"submit"})))))}}]),t}(n.Component);k.contextType=f;var T=k,N=a(47),y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).auth0=new N.a.WebAuth({domain:"sashc0.eu.auth0.com",clientID:"CaS6LnWP2QmQ6eVu4JFIYCiMAMsNW30B",redirectUri:"http://94.45.133.18:53000/auth",responseType:"token id_token",scope:"openid profile"}),a.submitHandler=function(e){e.preventDefault(),a.auth0.authorize()},a.AuthenticationHandler=function(){a.auth0.parseHash(function(e,t){t&&t.accessToken?a.auth0.client.userInfo(t.accessToken,function(e,n){a.context.login(t.accessToken,n.name)}):e&&console.log(e)})},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.AuthenticationHandler()}},{key:"render",value:function(){return c.a.createElement("div",{className:"wrapper__top"},c.a.createElement("header",null,c.a.createElement("h1",null,"\u0421\u0420\u04104")),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"form-title"},c.a.createElement("div",null,"\u0422\u042b \u0425\u0422\u041e?")),c.a.createElement("form",{className:"theme-form",onSubmit:this.submitHandler},c.a.createElement("input",{type:"submit",value:"\u0412\u041e\u0419\u0422\u0418"})),c.a.createElement("div",{className:"welcome-block"},c.a.createElement("h3",null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 ",c.a.createElement("strong",null,"\u0421\u0420\u0410\u0427!")),c.a.createElement("p",null,"\u042d\u0442\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0432\u043e \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e. ",c.a.createElement("br",null),"\u0417\u0430\u0445\u043e\u0434\u0438, \u0432\u044b\u0431\u0438\u0440\u0430\u0439 \u0442\u0435\u043c\u0443 \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0439 \u043d\u043e\u0432\u0443\u044e. ",c.a.createElement("br",null),"\u0423 \u0442\u0435\u0431\u044f \u043d\u0435\u0442 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439!",c.a.createElement("br",null)))))}}]),t}(n.Component);y.contextType=f;var S=function(e){function t(e){var a,n;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={topicTitle:"",topics:[],selectedTopic:null,pros:!0,token:null,userId:"",username:""},a.login=function(e,t){a.setState({token:e,username:t})},a.logout=function(){a.setState({token:null,userId:null,username:null})},a.handleSubmit=function(e){var t;e.preventDefault(),t=a.state.topicTitle,E.emit("createTopic",{title:t}),a.setState({topicTitle:""})},a.selectTopic=function(e,t){a.setState({selectedTopic:e,pros:t})},a.back=function(){return a.setState({selectedTopic:null})},a.temperature=function(e){return e},n=function(e){a.setState(function(t){return{topics:t.topics.concat([e])}})},E.on("topics",function(e){return n(e)}),E.emit("subscribeToTopics"),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.topics.map(function(t){return c.a.createElement("li",{key:t._id},c.a.createElement("span",{style:{fontFamily:"Fredericka the Great",fontSize:24}},t.title,e.temperature(t.publishedMessages.length)),c.a.createElement("button",{onClick:function(a){return e.selectTopic(t,!0)}},"\u0417\u0430"),c.a.createElement("button",{onClick:function(a){return e.selectTopic(t,!1)}},"\u041f\u0440\u043e\u0442\u0438\u0432"))}),a=c.a.createElement("div",{className:"wrapper__top"},c.a.createElement("header",null,c.a.createElement("button",{className:"btn-logout",onClick:function(){return e.logout()}},"\u0412\u044b\u0439\u0442\u0438"),c.a.createElement("h1",null,"\u0421\u0420\u04104")),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"form-title"},c.a.createElement("div",null,"\u041d\u043e\u0432\u0430\u044f \u0442\u0435\u043c\u0430")),c.a.createElement("form",{className:"theme-form",onSubmit:this.handleSubmit},c.a.createElement("input",{type:"text",name:"topicTitle",value:this.state.topicTitle,onChange:function(t){return e.setState({topicTitle:t.target.value})},placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0442\u0435\u043c\u044b"}),c.a.createElement("input",{type:"submit",value:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})),c.a.createElement("section",{className:"bg-gif"},c.a.createElement("div",{className:"title-start"},c.a.createElement("strong",null,"START")),c.a.createElement("ul",{className:"themes-list"},t))));return this.state.selectedTopic&&(a=c.a.createElement(T,{key:this.state.selectedTopic._id,topic:this.state.selectedTopic,pros:this.state.pros,temperature:this.temperature,back:this.back})),c.a.createElement(p.a,null,c.a.createElement(f.Provider,{value:{token:this.state.token,username:this.state.username,login:this.login,logout:this.logout}},c.a.createElement(h.d,null,this.state.token&&c.a.createElement(h.b,{path:"/",exact:!0,render:function(){return a}}),this.state.token&&c.a.createElement(h.a,{from:"/auth",to:"/"}),!this.state.token&&c.a.createElement(h.b,{path:"/auth",component:y}),c.a.createElement(h.a,{to:"/auth"})),c.a.createElement("footer",null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e,t,a){e.exports=a(102)},81:function(e,t){}},[[51,1,2]]]);
//# sourceMappingURL=main.0acb5807.chunk.js.map